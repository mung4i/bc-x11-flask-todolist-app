 {% extends "base.html" %}
 {% block title %}login{% endblock %}
 {% block content %}
    <h1>Sign in with your favorite social</h1>
    {% for message in get_flashed_messages() %}
    <p><b>Error</b>: {{ message }}</p>
    {% endfor %} {% if current_user.is_authenticated %}
    <h2>Hi, {{ current_user.nickname }}!</h2>
    <p><a href="{{ url_for('logout') }}">Logout</a></p>
    {% else %}
    <h2>I don't know you!</h2>
    <p><a href="{{ url_for('oauth_authorize', provider='facebook') }}">Login with Facebook</a></p>
    <p><a href="{{ url_for('oauth_authorize', provider='twitter') }}">Login with Twitter</a></p>
    {% endif %}
{% endblock %}
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '{your-app-id}',
            cookie: true,
            xfbml: true,
            version: '{latest-api-version}'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

</script>
